# PPPKMI Conference - cPanel Safe Cron Jobs

## Main Scheduler (REQUIRED)
# Frequency: Every minute
# This runs all scheduled tasks defined in AppServiceProvider
* * * * * cd /home/pppkmior/public_html/conference && /usr/local/bin/ea-php82 artisan schedule:run >> storage/logs/scheduler.log 2>&1

## Alternative Queue Processing (if scheduler fails)
# Frequency: Every 5 minutes
# This ensures queue processing continues even if main scheduler has issues
*/5 * * * * cd /home/pppkmior/public_html/conference && /usr/local/bin/ea-php82 artisan queue:work --stop-when-empty --timeout=300 --tries=3 >> storage/logs/queue-backup.log 2>&1

## Manual Storage Setup (if storage:link-cpanel command fails)
# Frequency: Every Sunday at 3 AM
# Creates storage directory manually without symlink
0 3 * * 0 cd /home/pppkmior/public_html/conference && mkdir -p public/storage && cp -r storage/app/public/* public/storage/ >> storage/logs/storage-manual.log 2>&1

## Monthly Log Cleanup (Optional)
# Frequency: First day of every month at 4 AM
# Cleans up old log files to save disk space
0 4 1 * * cd /home/pppkmior/public_html/conference && find storage/logs/ -name "*.log" -mtime +30 -delete

# EMERGENCY COMMANDS (Run manually if needed):
# Test commands registration:
# /usr/local/bin/ea-php82 artisan test:commands
#
# Clear all caches:
# /usr/local/bin/ea-php82 artisan cache:clear && /usr/local/bin/ea-php82 artisan config:clear
#
# Manual storage setup:
# mkdir -p public/storage && cp -r storage/app/public/* public/storage/

# NOTES:
# 1. NEVER use 'storage:link' in cron jobs - it requires exec() function
# 2. Use 'storage:link-cpanel' instead - it's safe for shared hosting
# 3. The main scheduler (first cron job) handles all other tasks automatically
# 4. Additional cron jobs are backup/maintenance only
# 5. All cron jobs include error handling and logging
